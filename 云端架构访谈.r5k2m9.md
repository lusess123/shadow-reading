# ğŸ¯ äº‘ç«¯æ¶æ„è®¿è°ˆ è‹±è¯­æ®µè½ç¿»è¯‘

æœ¬æ–‡å…± **23 ä¸ªè¯­ä¹‰å•å…ƒ**ï¼Œå°†å…¨éƒ¨ç¿»è¯‘ã€‚

---

(1) [11:24-11:41] **It takes about three years for someone to understand that you don't need your, database migration script to be as fast. you also don't need like a bespoke framework that you're allowed to have like a script that you can just like, even if it does only a single line, console log, hello world, like that's fine. You don't need like a bespoke CLI thingy to run it.**

å¤§æ¦‚è¦ä¸‰å¹´æ‰ä¼šæ˜ç™½ï¼Œæ•°æ®åº“è¿ç§»è„šæœ¬ä¸å¿…è¿½æ±‚æè‡´é€Ÿåº¦ï¼Œä¹Ÿä¸å¿…ä¸ºäº†é€Ÿåº¦åšé¢å¤–ä¼˜åŒ–ï¼›ä¹Ÿä¸éœ€è¦å®šåˆ¶æ¡†æ¶ï¼Œå“ªæ€•è„šæœ¬åªæ˜¯ä¸€è¡Œ **console log** çš„ hello world ä¹Ÿå¯ä»¥ï¼Œèƒ½è·‘å°±è¡Œï¼Œæ›´ä¸ç”¨ç‰¹åˆ¶çš„ **CLI** æ¥è·‘å®ƒã€‚

è§£æï¼š
* **database migration script**ï¼šæ•°æ®åº“è¿ç§»è„šæœ¬ï¼ˆåè¯ï¼‰
* **bespoke**ï¼šå®šåˆ¶çš„ï¼ˆå½¢å®¹è¯ï¼‰
* **console log**ï¼šæ§åˆ¶å°æ‰“å°ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **You don't need ...**ï¼šå¦å®šå¿…è¦æ€§çš„è¡¨è¾¾

---

(2) [11:46-11:58] **Well, also I would also argue that it take about five years for someone to ease into all the TypeScript, you know, like not TypeScript, but most of Node.js ecosystem tooling. Right? It took a while. Because if someone has been in a Golang for a while, they probably have, they probably pollute them, you know, their home directory with all the Go binary already.**

æˆ‘è¿˜ä¼šè¯´ï¼Œé€‚åº” **TypeScript**â€”â€”æ›´å‡†ç¡®æ˜¯æ•´ä¸ª **Node.js** å·¥å…·ä½“ç³»â€”â€”å¤§æ¦‚è¦äº”å¹´ï¼Œç¡®å®è¦èŠ±æ—¶é—´ï¼Œä¸åªæ˜¯è¯­è¨€æœ¬èº«ã€‚å› ä¸ºå¦‚æœä¸€ä¸ªäººåœ¨ **Golang** é‡Œå¾…ä¹…äº†ï¼Œå®¶ç›®å½•å¾ˆå¯èƒ½å·²ç»è¢«ä¸€å † **Go** äºŒè¿›åˆ¶â€œæ±¡æŸ“â€ã€‚

è§£æï¼š
* **ease into** ğŸ”¥ï¼šé€æ¸é€‚åº”ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **ecosystem tooling**ï¼šç”Ÿæ€å·¥å…·é“¾ï¼ˆåè¯ï¼‰
* **Golang**ï¼š**Go** è¯­è¨€çš„åˆ«ç§°
* **pollute**ï¼šæ±¡æŸ“ã€å¼„ä¹±ï¼ˆåŠ¨è¯ï¼‰

---

(3) [12:04-12:21] **I mean, I did the mistake three times. So I'm like, holy moly. I have so many of that. the zero point five version of Go, Was that you add Go in your user bin You clone it down and then every single main module, you just, you keep on cloning it. There's no, there's no Go model. Your machine becomes a Go machine. Yes. Your machine is essentially a Go machine.**

æˆ‘å°±çŠ¯è¿‡ä¸‰æ¬¡è¿™ç§é”™è¯¯ï¼Œå¿ƒé‡Œç›´å–Šâ€œholy molyâ€ï¼Œå †äº†å¤ªå¤šã€‚**Go 0.5** æ—¶ä»£è¦æŠŠ **Go** æ”¾è¿›ç”¨æˆ· **bin**ï¼Œæ‹‰ä¸‹æ¥åæ¯ä¸ª main æ¨¡å—éƒ½å¾—å…‹éš†ä¸€ä»½ï¼Œé‚£æ—¶å€™åŸºæœ¬éƒ½è¿™ä¹ˆå¹²ï¼›æ²¡æœ‰ **Go module**ï¼Œå¾ˆå®¹æ˜“å †æˆä¸€å›¢ï¼Œæœºå™¨å°±æˆäº†â€œGo æœºå™¨â€ã€‚

è§£æï¼š
* **holy moly**ï¼šå¤©å“ª/å“å‘€ï¼ˆæ„Ÿå¹ï¼‰
* **user bin**ï¼šç”¨æˆ·å¯æ‰§è¡Œç›®å½•ï¼ˆåè¯ï¼‰
* **clone**ï¼šå…‹éš†ï¼ˆåŠ¨è¯ï¼‰
* **There's no ...**ï¼šå¼ºè°ƒä¸å­˜åœ¨ï¼ˆå¥å‹ï¼‰

---

(4) [12:26-12:43] **And then with Python, for example, right? You get used to either using UV or PIP, right? You get used to running almost everything. And so when people are, you know, kind of, used to it, right? It's really hard for them to switch gear. And this is why they having a list ensuring that when the team is still growing, we ensure that the consistency is there, right? Then there's no fragmentation of knowledge, right? And people can learn very quickly too. It's not that crazy.**

æ¯”å¦‚ **Python**ï¼Œä½ ä¼šä¹ æƒ¯ç”¨ **UV** æˆ– **PIP** è·‘å‡ ä¹æ‰€æœ‰ä¸œè¥¿ï¼Œä»€ä¹ˆä»»åŠ¡éƒ½ç”¨å®ƒæ¥è·‘ï¼›ä¸€æ—¦ä¹ æƒ¯äº†ï¼Œå°±å¾ˆéš¾â€œæ¢æŒ¡â€ã€‚å› æ­¤å›¢é˜Ÿå¢é•¿æ—¶è¦ä¿è¯ä¸€è‡´æ€§ï¼Œé¿å…çŸ¥è¯†ç¢ç‰‡åŒ–ï¼Œè®©å¤§å®¶éƒ½èƒ½æ›´å¿«ä¸Šæ‰‹ã€‚

è§£æï¼š
* **get used to** ğŸ”¥ï¼šä¹ æƒ¯äºï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **switch gear** ğŸ”¥ï¼šæ¢æŒ¡/è½¬å˜åšæ³•ï¼ˆæ¯”å–»ï¼‰
* **consistency**ï¼šä¸€è‡´æ€§ï¼ˆåè¯ï¼‰
* **fragmentation**ï¼šç¢ç‰‡åŒ–ï¼ˆåè¯ï¼‰

---

(5) [12:49-13:01] **So tell me a bit more about how you've picked Cloudflare back then did you have a lot of experience with Cloudflare workers from previous projects and how, like, I suppose there's also a non-trivial amount of money being spent. So I'm curious how you think about this as well. It's actually very cheap. I'm not, I'm not kidding you. Like the infrastructure cost is break even completely. Just by the fee.**

èƒ½å¦è¯´è¯´å½“åˆä¸ºä»€ä¹ˆé€‰ **Cloudflare**ï¼Ÿä½ ä»¥å‰æœ‰ **Cloudflare Workers** çš„ç»éªŒå—ï¼Ÿè€Œä¸”åº”è¯¥èŠ±äº†ä¸å°‘é’±å§ï¼Œæˆ‘ä¹Ÿå¥½å¥‡ä½ æ€ä¹ˆè€ƒè™‘è¿™ç¬”å¼€é”€ã€‚å…¶å®éå¸¸ä¾¿å®œï¼Œæˆ‘ä¸æ˜¯å¼€ç©ç¬‘ï¼ŒåŸºç¡€è®¾æ–½æˆæœ¬åŸºæœ¬é è´¹ç”¨å°±èƒ½æ‰“å¹³ã€‚

è§£æï¼š
* **pick**ï¼šé€‰æ‹©ï¼ˆåŠ¨è¯ï¼‰
* **non-trivial**ï¼šä¸å°çš„ã€ä¸å¯å¿½è§†çš„ï¼ˆå½¢å®¹è¯ï¼‰
* **break even** ğŸ”¥ï¼šæ‰“å¹³ã€æ”¶æ”¯ç›¸æŠµï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **infrastructure cost**ï¼šåŸºç¡€è®¾æ–½æˆæœ¬ï¼ˆåè¯ï¼‰

---

(6) [13:06-13:24] **So actually before Cloudflare, we were all on Vercel. Everything was on Vercel until they, they decided to charge for egress cost, right? but then also the, the network connection layer was not first class, right? So everything was completely abstracted.**

åœ¨ **Cloudflare** ä¹‹å‰æˆ‘ä»¬éƒ½åœ¨ **Vercel**ï¼Œç›´åˆ°ä»–ä»¬å¼€å§‹æ”¶ **egress** è´¹ç”¨ï¼›è€Œä¸”ç½‘ç»œè¿æ¥å±‚ä¸æ˜¯ä¸€ç­‰å…¬æ°‘ï¼Œå¾ˆå¤šç»†èŠ‚è¢«æŠ½è±¡æ‰ï¼Œç”¨èµ·æ¥ä¸å¤Ÿé€æ˜ã€ä¹Ÿä¸å¤Ÿå¯æ§ï¼Œä½“éªŒä¸Šæ¯”è¾ƒåˆ«æ‰­ï¼Œæ’æŸ¥é—®é¢˜ä¹Ÿæ›´éš¾ã€‚

è§£æï¼š
* **egress cost**ï¼šå‡ºç«™æµé‡è´¹ç”¨ï¼ˆåè¯ï¼‰
* **first class**ï¼šä¸€ç­‰å…¬æ°‘/æ ¸å¿ƒæ”¯æŒï¼ˆå½¢å®¹è¯ï¼‰
* **abstracted**ï¼šè¢«æŠ½è±¡ã€è¢«å±è”½ç»†èŠ‚ï¼ˆè¿‡å»åˆ†è¯ï¼‰
* **until**ï¼šç›´åˆ°...ä¸ºæ­¢ï¼ˆæ—¶é—´è¿æ¥ï¼‰

---

(7) [13:30-13:45] **And we also have, even though we were on Vercel, we also have a Cloudflare proxy on top as well, right? For all the, you know, like for the DDoS protection and so on. So there's a three loop, three hoop. And so, I'm curious to hear a little bit more about the software aspect of like, what does a typical line of code in your TypeScript app actually look like? So currently you're running on Cloudflare workers. So in Cloudflare workers, for those who have never written a Cloudflare worker, it's essential, it's very web centric.**

å³ä¾¿åœ¨ **Vercel** ä¸Šï¼Œæˆ‘ä»¬ä¹Ÿå äº† **Cloudflare** ä»£ç†åš **DDoS** é˜²æŠ¤ï¼Œæ‰€ä»¥ä¸­é—´æœ‰å¥½å‡ é“è·³è½¬ï¼Œé“¾è·¯æ›´é•¿ã€å±‚çº§æ›´å¤šã€‚è¯´åˆ°è½¯ä»¶å±‚é¢ï¼Œæˆ‘æƒ³äº†è§£ **TypeScript** åº”ç”¨çš„ä»£ç é•¿ä»€ä¹ˆæ ·ï¼šä½ ä»¬ç°åœ¨è·‘åœ¨ **Cloudflare Workers** ä¸Šï¼Œå®ƒéå¸¸ Web åŒ–ã€‚

è§£æï¼š
* **proxy**ï¼šä»£ç†ï¼ˆåè¯ï¼‰
* **DDoS protection**ï¼š**DDoS** é˜²æŠ¤ï¼ˆåè¯ï¼‰
* **web centric**ï¼šä»¥ Web ä¸ºä¸­å¿ƒï¼ˆå½¢å®¹è¯ï¼‰
* **what ... look like**ï¼šè¯¢é—®â€œé•¿ä»€ä¹ˆæ ·â€çš„ç»“æ„

---

(8) [13:52-14:08] **So you have like an export default there. And in there, that's basically you export an object that returns a fetch function. And in that fetch function, you get a request coming in, you do your thing, and then you send back a response. It's like very simple, works really well. But like how you do your thing, it does like, that's the actual app that you're running. So I'm curious like how that looks like.**

åœ¨ **Workers** é‡Œä¼šæœ‰ `export default`ï¼Œå¯¼å‡ºä¸€ä¸ªå¯¹è±¡ï¼Œé‡Œé¢è¿”å› **fetch** å‡½æ•°ï¼›è¯·æ±‚è¿›æ¥ä½ åœ¨ **fetch** é‡Œå¤„ç†ï¼Œç»„è£…ç»“æœå†è¿”å›å“åº”ã€‚æ•´ä½“å¾ˆç®€å•ã€ä¹Ÿå¾ˆå¥½ç”¨ï¼ŒçœŸæ­£çš„åº”ç”¨å°±æ˜¯â€œä½ æ€ä¹ˆå¤„ç†â€çš„é‚£æ®µé€»è¾‘ã€‚

è§£æï¼š
* **export default**ï¼šé»˜è®¤å¯¼å‡ºï¼ˆè¯­æ³•ï¼‰
* **fetch function**ï¼šå¤„ç†è¯·æ±‚çš„å‡½æ•°ï¼ˆåè¯ï¼‰
* **request/response**ï¼šè¯·æ±‚/å“åº”ï¼ˆåè¯ï¼‰
* **the actual app**ï¼šçœŸæ­£çš„åº”ç”¨éƒ¨åˆ†ï¼ˆåè¯çŸ­è¯­ï¼‰

---

(9) [14:43-15:01] **A lot of time I would love to infer the type, right? Because I hate typing thing manually. I like to infer the type as much as possible. This is why one of my favorite brand teasers I give people is inferring type from third party library. You have to see if they have struggled through this thing before.**

å¾ˆå¤šæ—¶å€™æˆ‘æ›´æƒ³è®©ç±»å‹è‡ªåŠ¨æ¨å¯¼ï¼Œå› ä¸ºæˆ‘è®¨åŒæ‰‹å†™ç±»å‹ã€‚æˆ‘å–œæ¬¢å°½å¯èƒ½æ¨å¯¼ç±»å‹ï¼Œæ‰€ä»¥æˆ‘å¸¸å‡ºçš„â€œè€ƒé¢˜â€æ˜¯ï¼šèƒ½å¦ä»ç¬¬ä¸‰æ–¹åº“æ¨å¯¼å‡ºç±»å‹ï¼Œçœ‹ä»–ä»¬æ˜¯å¦è¸©è¿‡è¿™ä¸ªå‘ã€‚

è§£æï¼š
* **infer the type** ğŸ”¥ï¼šæ¨å¯¼ç±»å‹ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **manually**ï¼šæ‰‹åŠ¨åœ°ï¼ˆå‰¯è¯ï¼‰
* **third-party library**ï¼šç¬¬ä¸‰æ–¹åº“ï¼ˆåè¯ï¼‰
* **see if**ï¼šçœ‹æ˜¯å¦/æ£€éªŒï¼ˆä»å¥ï¼‰

---

(10) [15:08-15:13] **the Cloudflare code is we just use the Cloudflare Hono library to wrap all the API under the same path and then does it. at that point, just the entry point with authentication and middleware and the rest of the core logic are plain function. Got it.**

**Cloudflare** è¿™è¾¹æˆ‘ä»¬ç”¨ **Hono** æŠŠæ‰€æœ‰ **API** åŒ…åœ¨åŒä¸€è·¯å¾„ä¸‹ï¼Œè·¯ç”±ç»Ÿä¸€ï¼›å…¥å£åªåšé‰´æƒå’Œä¸­é—´ä»¶ï¼Œå…¶ä»–éƒ½ä¸‹æ²‰åˆ°æ ¸å¿ƒé€»è¾‘é‡Œï¼Œä»æ˜¯æ™®é€šå‡½æ•°ï¼Œæ•´ä½“æµç¨‹å¾ˆæ¸…æ¥šï¼Œå†™èµ·æ¥ä¹Ÿæ›´ç›´è§‚ã€‚æ˜ç™½ã€‚

è§£æï¼š
* **Hono**ï¼š**Cloudflare** ç”Ÿæ€çš„ Web æ¡†æ¶
* **wrap ... under**ï¼šæŠŠ...åŒ…åœ¨...ä¹‹ä¸‹ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **middleware**ï¼šä¸­é—´ä»¶ï¼ˆåè¯ï¼‰
* **authentication**ï¼šé‰´æƒï¼ˆåè¯ï¼‰

---

(11) [15:19-16:00] **So how is that like that inner chunk of business logic that's like actually what makes OpenRouter work, like where you're actually route the requests. So can you describe a little bit the architecture and like how trivial is what's happening inside there or how non-trivial, probably the latter. So maybe you can describe roughly like what is the life cycle of a request as it walks through like various stages of what makes OpenRouter, OpenRouter. Scaling & Routing in OpenRouter's Infrastructure let's make the tech request we have Llama for Maverick, let's say maverick. Maverick has about what like more than 10 different providers or serving the model.**

é‚£çœŸæ­£è®© **OpenRouter** è¿è½¬çš„ä¸šåŠ¡é€»è¾‘å’Œè¯·æ±‚è·¯ç”±æ˜¯ä»€ä¹ˆæ ·ï¼Ÿèƒ½å¦æè¿°æ¶æ„å’Œè¯·æ±‚ç”Ÿå‘½å‘¨æœŸï¼Œé‡Œé¢åˆ°åº•æœ‰å¤šå¤æ‚ï¼Ÿã€OpenRouter çš„æ‰©å±•ä¸è·¯ç”±ã€‘ä»¥ **Llama 4 Maverick** ä¸ºä¾‹ï¼Œæœ‰åå¤šä¸ªä¾›åº”å•†æä¾›è¯¥æ¨¡å‹ã€‚

è§£æï¼š
* **business logic**ï¼šä¸šåŠ¡é€»è¾‘ï¼ˆåè¯ï¼‰
* **life cycle**ï¼šç”Ÿå‘½å‘¨æœŸï¼ˆåè¯ï¼‰
* **Scaling & Routing**ï¼šæ‰©å±•ä¸è·¯ç”±ï¼ˆæ ‡é¢˜ï¼‰
* **provider**ï¼šä¾›åº”å•†/æä¾›æ–¹ï¼ˆåè¯ï¼‰

---

(12) [16:07-16:26] **So when a provider is serving the model, we call that an endpoint. That's a concept that we have internally. A provider is, this company, right? Is the provider containing metadata but the provider meaning like company names, what they do or their location, right? Like the data privacy policy and stuff like that. The model is like the actual model on, that's the actual weight to the model with like context length combined those two, we call that an endpoint.**

å½“ä¾›åº”å•†æä¾›æ¨¡å‹æ—¶ï¼Œæˆ‘ä»¬æŠŠå®ƒå« **endpoint**ï¼Œè¿™æ˜¯å†…éƒ¨æ¦‚å¿µã€‚**provider** æ˜¯å…¬å¸æœ¬èº«ï¼ŒåŒ…å«å…¬å¸åã€ä¸šåŠ¡ã€ä½ç½®ã€éšç§æ”¿ç­–ç­‰å…ƒæ•°æ®ï¼›æ¨¡å‹æ˜¯æƒé‡åŠ ä¸Šä¸‹æ–‡é•¿åº¦ï¼Œä¸¤è€…ç»„åˆå°±å½¢æˆ **endpoint**ã€‚

è§£æï¼š
* **endpoint**ï¼šç«¯ç‚¹ï¼ˆåè¯ï¼‰
* **metadata**ï¼šå…ƒæ•°æ®ï¼ˆåè¯ï¼‰
* **context length**ï¼šä¸Šä¸‹æ–‡é•¿åº¦ï¼ˆåè¯ï¼‰
* **combine A and B**ï¼šæŠŠ A å’Œ B ç»„åˆï¼ˆç»“æ„ï¼‰

---

(13) [16:33-16:44] **let's say when we call the Llama 4 model Maverick, there's like more than 10 endpoints. The first thing is authentication, right? But authentication is literally just a function. We authenticate first. And then after you authenticate, we return a result, right? Either results, we really subscribe to the result monad paradigm.**

æ¯”å¦‚è°ƒç”¨ **Llama 4 Maverick** ä¼šæœ‰åå¤šä¸ª **endpoint**ã€‚ç¬¬ä¸€æ­¥æ˜¯é‰´æƒï¼Œè€Œä¸”é‰´æƒå°±æ˜¯ä¸ªå‡½æ•°ï¼›å…ˆé‰´æƒå†è¿”å› **result**ï¼Œå¹¶ä»¥ **result monad** è¿™å¥—èŒƒå¼è´¯ç©¿åç»­æµç¨‹ï¼Œç¡®ä¿æ¯ä¸€æ­¥éƒ½æœ‰ç»“æœå¯æŸ¥ï¼Œåç»­é€»è¾‘ä¹Ÿå›´ç»•å®ƒå±•å¼€ã€‚

è§£æï¼š
* **authentication**ï¼šé‰´æƒï¼ˆåè¯ï¼‰
* **literally**ï¼šå°±æ˜¯/ç¡®å®ï¼ˆå¼ºè°ƒå‰¯è¯ï¼‰
* **return a result**ï¼šè¿”å›ç»“æœï¼ˆç»“æ„ï¼‰
* **result monad**ï¼šç»“æœå•å­ï¼ˆæ¦‚å¿µï¼‰

---

(14) [16:44-17:13] **So almost every function we have returning results, we check the result and then we return a respond as needed. we would then take the request and we pass it through each of these endpoint. And while passing through the endpoint, so there are two stack that we applying for each of the requests. One stack is the routing, the routing stack. The routing stack allow us to like prioritize and order the endpoint according to what the user wants or according to some heuristic like latency, throughput or price.**

å‡ ä¹æ¯ä¸ªå‡½æ•°éƒ½è¿”å› **result**ï¼Œæˆ‘ä»¬æ£€æŸ¥ç»“æœå†æŒ‰éœ€å“åº”ï¼Œæœ‰é—®é¢˜å°±ç›´æ¥è¿”å›ã€‚éšåè¯·æ±‚ä¼šç©¿è¿‡å„ä¸ª **endpoint**ï¼Œæ¯ä¸ªè¯·æ±‚åº”ç”¨ä¸¤å¥—æ ˆï¼šå…¶ä¸­ä¸€å¥—æ˜¯ **routing stack**ï¼ŒæŒ‰ç”¨æˆ·éœ€æ±‚æˆ– **heuristic**ï¼ˆå¦‚ **latency**ã€**throughput**ã€**price**ï¼‰æ¥æ’åºã€‚

è§£æï¼š
* **pass ... through**ï¼šè®©...ç»è¿‡ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **routing stack**ï¼šè·¯ç”±æ ˆï¼ˆåè¯ï¼‰
* **heuristic**ï¼šå¯å‘å¼è§„åˆ™ï¼ˆåè¯ï¼‰
* **prioritize/order**ï¼šä¼˜å…ˆçº§æ’åºï¼ˆåŠ¨è¯ï¼‰

---

(15) [17:18-17:36] **So the routings are a stack of decision step. And secondly, we have a plugin layers. The plugin layer allow us to like basically transform the request and also transform respond as the stream coming back up have a FIFO stack style. And that's essentially is the life cycle of requests. And then we just keep on hitting each endpoint until one that's actually, one is like saying, A, we can use a 200, we can now return some data.**

è·¯ç”±æœ¬èº«æ˜¯ä¸€ç»„å†³ç­–æ­¥éª¤çš„æ ˆï¼›ç¬¬äºŒå¥—æ˜¯ **plugin layer**ï¼Œç”¨æ¥å˜æ¢è¯·æ±‚ä¸è¿”å›æµï¼Œå›ä¼ æ—¶æ˜¯ **FIFO** é£æ ¼ã€‚è¿™å°±æ˜¯è¯·æ±‚çš„ç”Ÿå‘½å‘¨æœŸï¼šä¸æ–­å‘½ä¸­ **endpoint**ï¼Œç›´åˆ°è¿”å› **200** æ‰è¾“å‡ºæ•°æ®ï¼ŒæˆåŠŸå°±ç»“æŸã€‚

è§£æï¼š
* **decision steps**ï¼šå†³ç­–æ­¥éª¤ï¼ˆåè¯ï¼‰
* **plugin layer**ï¼šæ’ä»¶å±‚ï¼ˆåè¯ï¼‰
* **FIFO**ï¼šå…ˆè¿›å…ˆå‡ºï¼ˆåè¯ï¼‰
* **until**ï¼šç›´åˆ°ï¼ˆæ¡ä»¶/æ—¶é—´ï¼‰

---

(16) [17:41-17:52] **That's like a full cycle. And the code for all of this is very modular. Every step is a function. And then we just have an orchestration that's run through each of those would be very trivial to rewrite into Effect down the line. But we write this code before there was Effect. I think it was Effect 1.x or something.**

è¿™å°±æ˜¯ä¸€ä¸ªå®Œæ•´å¾ªç¯ã€‚ä»£ç éå¸¸æ¨¡å—åŒ–ï¼Œæ¯æ­¥éƒ½æ˜¯å‡½æ•°ï¼›ç”±ç¼–æ’æŠŠå®ƒä»¬ä¸²èµ·æ¥ï¼Œæ•´ä½“ç»“æ„å¾ˆæ¸…æ™°ï¼Œä»¥åæ”¹å†™æˆ **Effect** æˆæœ¬ä¸é«˜ï¼Œåªæ˜¯å½“æ—¶å†™å®ƒæ—¶ **Effect** è¿˜æ²¡å‡ºç°ï¼ˆå¤§æ¦‚ **1.x** ä¹‹å‰ï¼‰ã€‚

è§£æï¼š
* **modular**ï¼šæ¨¡å—åŒ–çš„ï¼ˆå½¢å®¹è¯ï¼‰
* **orchestration**ï¼šç¼–æ’ï¼ˆåè¯ï¼‰
* **trivial to**ï¼šå¾ˆå®¹æ˜“åšåˆ°ï¼ˆç»“æ„ï¼‰
* **down the line**ï¼šå°†æ¥/ä»¥åï¼ˆçŸ­è¯­ï¼‰

---

(17) [17:52-18:14] **So, and I have to say just a brief comment because what you described is sounding very similar to what I had to do in my past, which is some sort of consolidation engine between different APIs that expose a single format. Michael's Story: Why Effect Was Born**

æˆ‘å¾—è¡¥å……ä¸€å¥ï¼šä½ æè¿°çš„ä¸œè¥¿å¾ˆåƒæˆ‘è¿‡å»åšçš„â€”â€”åœ¨ä¸åŒ **API** ä¹‹é—´åšç»Ÿä¸€æ ¼å¼çš„ **consolidation engine**ï¼Œæœ¬è´¨æ˜¯åŒä¸€ç§é—®é¢˜ï¼Œä¹Ÿå°±æ˜¯æˆ‘å½“æ—¶çš„ç»å†å’Œå‘ã€‚æ¥ä¸‹æ¥æ˜¯ã€Michael çš„æ•…äº‹ï¼š**Effect** ä¸ºä½•è¯ç”Ÿã€‘ã€‚

è§£æï¼š
* **I have to say**ï¼šæˆ‘å¾—è¯´ï¼ˆæ’å…¥è¯­ï¼‰
* **sound similar to**ï¼šå¬èµ·æ¥åƒ/ç±»ä¼¼ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰
* **consolidation engine**ï¼šæ•´åˆå¼•æ“ï¼ˆåè¯ï¼‰
* **expose a single format**ï¼šæä¾›ç»Ÿä¸€æ ¼å¼ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰

---

(18) [18:20-18:39] **The reason Effect is born, like more than seven years ago now, it's because I was CTO of a Fintech company London. And we were doing consolidation over peer to peer landing providers. And we would buy and securitize those products to then sell them to institutional investors.**

**Effect** è¯ç”Ÿäºä¸ƒå¹´å¤šå‰ï¼Œå› ä¸ºæˆ‘å½“æ—¶æ˜¯ä¼¦æ•¦ä¸€å®¶ **Fintech** å…¬å¸çš„ **CTO**ã€‚æˆ‘ä»¬åœ¨æ•´åˆ **P2P** å€Ÿè´·å¹³å°ï¼ŒæŠŠäº§å“ä¹°ä¸‹å¹¶è¯åˆ¸åŒ–ï¼Œå†å–ç»™æœºæ„æŠ•èµ„è€…ï¼Œæµç¨‹éå¸¸é‡ã€èŠ‚å¥ä¹Ÿå¾ˆç´§ï¼Œå‹åŠ›ä¹Ÿä¸å°ã€‚

è§£æï¼š
* **be born**ï¼šè¯ç”Ÿï¼ˆåŠ¨è¯ï¼‰
* **CTO**ï¼šé¦–å¸­æŠ€æœ¯å®˜ï¼ˆåè¯ï¼‰
* **securitize**ï¼šè¯åˆ¸åŒ–ï¼ˆåŠ¨è¯ï¼‰
* **institutional investors**ï¼šæœºæ„æŠ•èµ„è€…ï¼ˆåè¯ï¼‰

---

(19) [18:45-18:57] **And we had a large piece of software, which was basically we wanted to have a single format for loans, as effectively all of the loans are the same. There's a borrower, there's a lender, there's an interest rate, which is charged annually, monthly, daily, or whatever, and so on and so forth.**

æˆ‘ä»¬æœ‰ä¸€å¥—å¤§å‹è½¯ä»¶ï¼Œç›®æ ‡æ˜¯ç»™è´·æ¬¾ä¸€ä¸ªç»Ÿä¸€æ ¼å¼ï¼Œå› ä¸ºæœ¬è´¨ä¸Šè´·æ¬¾éƒ½å·®ä¸å¤šï¼šå€Ÿæ¬¾äººã€å‡ºå€Ÿäººã€åˆ©ç‡ï¼Œä»¥åŠæŒ‰å¹´/æœˆ/æ—¥è®¡æ¯ï¼Œè¿˜åŒ…å«è®¡æ¯é¢‘ç‡è¿™ç±»å­—æ®µç­‰ç­‰ã€‚

è§£æï¼š
* **single format**ï¼šç»Ÿä¸€æ ¼å¼ï¼ˆåè¯ï¼‰
* **loan**ï¼šè´·æ¬¾ï¼ˆåè¯ï¼‰
* **interest rate**ï¼šåˆ©ç‡ï¼ˆåè¯ï¼‰
* **annually/monthly/daily**ï¼šæŒ‰å¹´/æœˆ/æ—¥ï¼ˆå‰¯è¯ï¼‰

---

(20) [19:03-19:16] **But then you had those providers that would all have outstandingly different APIs, sometimes to achieve exactly the same. And we had a very similar approach to what you described.**

ä½†ä¸åŒä¾›åº”å•†çš„ **API** å´å·®å¼‚å·¨å¤§ï¼Œæœ‰æ—¶å®ç°çš„ç›®æ ‡è¿˜ä¸€æ ·ï¼Œç”šè‡³åªæ˜¯æ¢äº†åå­—ï¼Œæ¥å£å½¢æ€å®Œå…¨ä¸åŒï¼Œç»å¸¸è¦å•ç‹¬é€‚é…ã€‚æˆ‘ä»¬é‡‡ç”¨çš„æ€è·¯å’Œä½ æè¿°çš„éå¸¸ç±»ä¼¼ã€‚

è§£æï¼š
* **outstandingly different**ï¼šå·®å¼‚æå¤§ï¼ˆå‰¯è¯+å½¢å®¹è¯ï¼‰
* **to achieve the same**ï¼šè¾¾æˆåŒä¸€ç›®çš„ï¼ˆçŸ­è¯­ï¼‰
* **approach**ï¼šæ–¹æ³•/æ€è·¯ï¼ˆåè¯ï¼‰
* **similar to**ï¼šç±»ä¼¼äºï¼ˆä»‹è¯çŸ­è¯­ï¼‰

---

(21) [19:16-19:34] **We also initially started with a result monad in Scala back in the day, and then testing became harder and harder and harder, to the point where we ended up doing tagless finally in Scala, which is it's absurd in complexity. It does achieve the goal of having everything modular and testable, but it is highly complex.**

æˆ‘ä»¬ä¸€å¼€å§‹åœ¨ **Scala** ç”¨ **result monad**ï¼Œåæ¥æµ‹è¯•è¶Šæ¥è¶Šéš¾ï¼Œæœ€åä¸å¾—ä¸ç”¨ **tagless final**ï¼›å¤æ‚åº¦ç¦»è°±ã€ç»´æŠ¤ä¹Ÿå¾ˆéš¾ï¼Œè¿­ä»£é€Ÿåº¦ä¹Ÿæ…¢ã€‚å®ƒç¡®å®è®©ä¸€åˆ‡æ¨¡å—åŒ–ä¸”å¯æµ‹è¯•ï¼Œä½†ä»£ä»·æ˜¯é«˜åº¦å¤æ‚ã€éå¸¸æ²‰é‡ã€‚

è§£æï¼š
* **result monad**ï¼šç»“æœå•å­ï¼ˆåè¯ï¼‰
* **tagless final**ï¼šæ— æ ‡ç­¾æœ€ç»ˆé£æ ¼ï¼ˆåè¯ï¼‰
* **to the point where** ğŸ”¥ï¼šåˆ°...çš„ç¨‹åº¦ï¼ˆç»“æ„ï¼‰
* **highly complex**ï¼šé«˜åº¦å¤æ‚ï¼ˆå½¢å®¹è¯ï¼‰

---

(22) [19:40-20:12] **And that's when I decided let's migrate everything to TypeScript because well, our domain is IO bound. There's no CPU compute used at any point in time except for data mapping, but even there, like you said before once you run your JavaScript in enough servers you're not really using multi-threading to handle a single request. You just have to respond to thousands of requests at the same time, but two requests can go to even two different instances and so on and so forth. Plus JavaScript is still very, very fast.**

äºæ˜¯æˆ‘å†³å®šè¿åˆ° **TypeScript**ï¼Œå› ä¸ºæˆ‘ä»¬çš„é¢†åŸŸæ˜¯ **IO-bound**ï¼Œå‡ ä¹ä¸éœ€è¦ **CPU** è®¡ç®—ï¼Œé™¤äº†æ•°æ®æ˜ å°„ã€‚æ­£å¦‚ä½ ä¹‹å‰è¯´çš„ï¼Œ**JavaScript** åœ¨è¶³å¤Ÿå¤šçš„æœåŠ¡å™¨ä¸Šè·‘æ—¶å¹¶ä¸éœ€è¦ä¸ºå•ä¸ªè¯·æ±‚ç”¨å¤šçº¿ç¨‹ï¼Œè€Œæ˜¯åŒæ—¶å“åº”æˆåƒä¸Šä¸‡è¯·æ±‚ï¼Œè¯·æ±‚è¿˜ä¼šåˆ†æ•£åˆ°ä¸åŒå®ä¾‹ã€‚**JavaScript** ä¾ç„¶å¾ˆå¿«ã€‚

è§£æï¼š
* **IO-bound**ï¼šIO å—é™ï¼ˆå½¢å®¹è¯ï¼‰
* **CPU compute**ï¼šCPU è®¡ç®—ï¼ˆåè¯ï¼‰
* **multi-threading**ï¼šå¤šçº¿ç¨‹ï¼ˆåè¯ï¼‰
* **respond to**ï¼šå“åº”ï¼ˆåŠ¨è¯çŸ­è¯­ï¼‰

---

(23) [20:18-20:45] **So I was like, let's move everything to TypeScript. And I was punched in the face because none of the infrastructure existed that we were using in Scala for TypeScript. And that's why I built Effect in the first place. So it was precisely to be in the consolidation engine, a testable consolidation engine that had embedded open telemetry And this is what later became the open source project Effect. So I think it would be extremely good fit for actually what you're trying to do and funny enough exactly the same that I was doing.**

æˆ‘è¯´â€œå…¨è¿ **TypeScript**â€ï¼Œç»“æœè¿é¢ä¸€æ‹³ï¼š**Scala** é‡Œç”¨çš„åŸºç¡€è®¾æ–½åœ¨ **TypeScript** é‡Œå…¨æ²¡æœ‰ï¼Œæ‰€ä»¥æˆ‘æ‰åšäº† **Effect**ã€‚å®ƒè¦æˆä¸ºå¯æµ‹è¯•çš„ **consolidation engine**ï¼Œå†…ç½® **OpenTelemetry**ï¼Œåæ¥æˆäº†å¼€æºé¡¹ç›®ï¼Œä¹Ÿæ­£å¥½é€‚åˆä½ ä»¬åšçš„äº‹ï¼Œå’Œæˆ‘å½“æ—¶åšçš„å‡ ä¹ä¸€æ ·ã€‚

è§£æï¼š
* **punched in the face** ğŸ”¥ï¼šå½“å¤´ä¸€æ£’ï¼ˆæ¯”å–»ï¼‰
* **infrastructure**ï¼šåŸºç¡€è®¾æ–½ï¼ˆåè¯ï¼‰
* **embedded**ï¼šå†…ç½®çš„ï¼ˆå½¢å®¹è¯ï¼‰
* **good fit for**ï¼šéå¸¸é€‚åˆï¼ˆçŸ­è¯­ï¼‰

---

## ğŸ“š æ®µè½å°ç»“

è¿™æ®µå¯¹è¯è®¨è®ºäº†å·¥å…·é“¾ä¸€è‡´æ€§ä¸è„šæœ¬å·¥ç¨‹åŒ–çš„å–èˆã€é€‰æ‹© **Cloudflare** çš„æˆæœ¬ä¸æ¶æ„è€ƒé‡ï¼Œå¹¶è§£é‡Šäº† **OpenRouter** çš„è·¯ç”±ä¸æ’ä»¶åˆ†å±‚ã€‚éšåè®²åˆ° **Effect** è¯ç”Ÿçš„å†å²èƒŒæ™¯ï¼Œä»¥åŠä¸ºä½•é€‚åˆç±»ä¼¼çš„æ•´åˆå‹ç³»ç»Ÿã€‚

### ğŸ”¥ æ ¸å¿ƒè¯æ±‡è¡¨

| è¯æ±‡/çŸ­è¯­ | å«ä¹‰ |
|---------|------|
| **bespoke** | å®šåˆ¶çš„ |
| **break even** | æ”¶æ”¯æ‰“å¹³ |
| **egress** | å‡ºç«™æµé‡ |
| **entry point** | å…¥å£ç‚¹ |
| **endpoint** | ç«¯ç‚¹ |
| **routing stack** | è·¯ç”±æ ˆ |
| **plugin layer** | æ’ä»¶å±‚ |
| **result monad** | ç»“æœå•å­ |
| **tagless final** | æ— æ ‡ç­¾æœ€ç»ˆé£æ ¼ |
| **IO-bound** | IO å—é™ |
| **OpenTelemetry** | å¯è§‚æµ‹æ€§é¥æµ‹æ ‡å‡† |
